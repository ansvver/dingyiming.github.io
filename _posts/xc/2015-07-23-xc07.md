---
layout: post
title: 西祠日记07
category: XC
tags: xc
keywords: xc
description: 西祠日记
---

【西祠日志】【07】努力努力，找资料，思考，怎么做asp图片上传  （2015.07.23周四）

今天忘了带本子，直接写在书上了笔记，晚点还是夹在本子里；
学了这么久的web应用，一直都没时间去做一点，相对复杂点得应用，比如现在要考虑的图片上传，或者是接下来要加强学习的正则表达式、防SQL注入、验证码的实现、图片水印功能等，这的确是应该作为我学习的第二个阶段，做一点相对复杂一点的应用功能，考虑怎样使自己做的网站更加健壮，今天主要是在找asp资料学习图片上传，考虑了下js实现web富文本编辑器，然后后来开始看慕课网的正则表达式教程，要学的还有很多，浮躁没有用，一天天好好做积累。

1、起初计划
1.1学习实现asp的上传显示图片
1.2考虑实现无组件的验证码
1.3考虑实现js富文本编辑器

2、实践情况
2.1由于获得了破解的PD，所以又在mac上装了win10，还不错的分辨率显示，就再次开始带macbook上班去了，所以先装了sqlserver2012，重建了下表，把之前做的asp留言板代码恢复了下，耗了时间，尤其是在sqlserver安装了连接上，有点伤脑筋，还是基础不够扎实，不过自然也是因为自己对sqlserver的忽视吧，sqlserver的纯express版式不会自带manager studio的，需要下载带manager studio的版本才好用，从另一角度想，就是我对命令行的操作实在是太少了，往后在学习Mysql上mongoDB上得多多注意积累命令行操作，自然这也是因为我还太菜了，好多都得摸索，没人教就得自己好好争气好好努力，为自己努力；

2.2接着，我看了看买的dw6+asp的书中关于asp的知识点部分，很可惜，这本书讲的过于基础，没有我想要的一些功能组件的说明，我本希望能从中获取，我想要做的图片上传功能的对象啊，方法、属性、或者组件之类的，可惜这本书上一概没讲到，就连网站也是靠DW得可视化编辑，比较没办法，买错书了，看来如今的asp是找不到书买的了，还是以百度为主，然后再脚本之家、ASP集中营里看到好些asp的知识比较，不错的学习的网站，要好好利用

2.3不断的百度资料，找关于asp的文件上传功能的做法，可惜都比较混乱，不过最重要还是自己不大懂人家写的代码，所以明天要好好搞一份研究研究里面的对象、方法、属性、操作、组件，以及考虑下到底有哪些方法来做，实在不行就参考慕课网中php上传文件的教程，毕竟这块其实更加相通，也有助于自己做php项目，如今我，不可以再只是考虑做个肤浅的应用了，而应该考虑怎么一点点的做出一个健壮的web应用，在其中不断学习，来成长自己；
今天，做了图片上传功能流程的思考：应该就是如下几点：
1、页面表单提供form标签   设定 Enctype="multipart/form-data" ,这是web上传文件必须在form中设置的一个MIME类型的确定，确保可以上传文件，由此form进行post提交到后端的URL地asp文件中进行传递请求；
2、asp对上传的文件进行获取，可能是获取二进制流吧，暂时是这么想得，可还没有确定到底是怎么获取到这个文件的，这一步很关键，就是获取到请求过来的文件；
3、开始验证文件大小、类型是不是符合我想要的，比如我想设定，小于2MB、文件类型为图片，当然在前端的时候就该先用js来验证下这个文件是不是符合我的要求，再到服务器端再次进行验证；
4、接着，找到需要存图片的目录，判断目录是否存在，不存在则新建，然后存入图片，将图片名称获取到；
5、将获取到得图片名称存储在数据库中，我的打算是直接把图片名在html的img下src中进行动态变换；
6、点击插入图片，就可以直接将图片img标签源码加入到正在输入的textarea中，从而也直接显示出来，上传留言时候，限定最多传入两张图片，即保存两个img 标签，可能还是可以考虑用正则来匹配，所以先学下正则也是很有必要的，很多地方都需要用它来做进阶验证；
恩大概就是这么考虑的，然后我就开始一步步地去找对应的解决方案，自然这样也应该有助于我去学习人家写的代码；
晚点这个做出来一定要把总结好好做，之前做了第一版的简单功能的总结，是第一个阶段；

2.4可能是吧，有点心急，总觉着防sql注入、XXS攻击这些盲点会让我的进度很慢，不过还好，从网友那里获取了一份还不的防御代码，直接包含就可以用，接着就是去读源码，不断增加自己在这方面的认识了，当然肯定还是需要借助去找一些资料，从基本的防御啊攻击啊，这些web漏斗上不断给自己充电，当然这需要一个比较长的阶段吧，现在能基本实现能读懂一些就ok；所以在验证码上，也得先用，再理解；

2.5考虑了富文本编辑器的做法，我想应该就是用js或者Jquery或者ajs来做，其实就是操作DOM给被选中的文字加上css样式，再保存，晚点还是要看看人家的代码，看看具体的实现，自己做上一些基本的功能，在这部分应该还是要先把慕课网的js、jquery课看完，然后再看一些需要用的操作DOM的技巧，反正也急不得，好好学才是最重要的；

2.6学习了慕课网的正则表达式，还没学完，明天学完要进行笔记总结，归纳，不然会忘记；

3、反省
怎么说呢，有失有得，至少在不断的努力着，这是可以肯定的，但是计划和实践，还是得再次强调强化下，我在决定实践上还是有些犹疑，这不大好，无论学什么，先一个个学好再说，不要太浪费时间去犹豫，好好执行计划，还是比较重要的事情；

4、【悟】
好比反省，又不一样反省，可能我还是有点不大喜欢asp吧，毕竟真的已经是被时代淘汰了的技术，我并不知道学这个对我以后会不会有多少帮助，但既然一样是web技术，然后我又是第一次在互联网公司实习，所以还是要好好努力，熬熬，多学点是一点，老技术也有老技术的好处，至少相对更稳定吧，恩恩，技术也还是大同小异的，并且依旧是脚本语言，等这个够稳固的花，对自己进一步学习啊使用php也还是很有帮助的，语言也是一个工具，要实现的功能都是要实现的，不会因为语言的差异而没办法实现某些功能，只是可能在方法上有点区别，或者没那么好获取资料什么的，没关系，只要我足够努力一定可以的，接下去的话，还是得花功夫实习js、jquery、ajax、json这些，比较有用，也很通用，当然有余力最好是能在开学之前做一个android的app来，有助于下学期学习android，可能往后也可以考虑去做android吧，自然ios也是很不错的，不过估计是没什么时间，还是别气馁，一点点来，加油！

5、明日打算
5.1、学习慕课的正则表达式视频，做归纳总结
5.2、一步步读asp文件上传的源码，并自己家进行实现
5.3、把asp留言板连接数据库的问题再处理下，看看到底哪里出了什么问题不
5.4、读防sql和xxs源码，多少先理解下，再找资料看看怎么防
5.5、继续学习js吧，赶紧把富文本做起来

恩，每天都过得蛮快的，明天是第二周上班的结尾了，我还在路上，慢慢爬，蜗牛一样的我。要学习，也要好好生活。